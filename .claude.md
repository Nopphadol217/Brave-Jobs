# BRAVE Jobs - Job Board Platform

## à¸ à¸²à¸à¸£à¸§à¸¡à¹‚à¸›à¸£à¹€à¸ˆà¸à¸•à¹Œ

BRAVE Jobs à¹€à¸›à¹‡à¸™à¹à¸à¸¥à¸•à¸Ÿà¸­à¸£à¹Œà¸¡ Job Board à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸œà¸¹à¹‰à¸«à¸²à¸‡à¸²à¸™à¸à¸±à¸šà¸™à¸²à¸¢à¸ˆà¹‰à¸²à¸‡ à¸à¸±à¸’à¸™à¸²à¸”à¹‰à¸§à¸¢ Next.js 16 (App Router) à¸à¸£à¹‰à¸­à¸¡à¸£à¸°à¸šà¸š Authentication, Database ORM, à¹à¸¥à¸° Background Jobs à¸—à¸µà¹ˆà¸—à¸±à¸™à¸ªà¸¡à¸±à¸¢

### à¸ªà¸–à¸²à¸™à¸°à¹‚à¸›à¸£à¹€à¸ˆà¸à¸•à¹Œ
- **Phase**: Early Development
- **Status**: Infrastructure Complete, Features In Progress
- **Core Systems**: âœ… Auth, âœ… Database, âœ… Webhooks, ğŸš§ UI Features

---

## ğŸ—ï¸ à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸£à¸°à¸šà¸š

### Tech Stack

| à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ | à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µ | à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™ |
|---------|----------|----------|
| **Frontend** | Next.js | 16.0.0 |
| **UI Framework** | React | 19.2.0 |
| **Language** | TypeScript | 5.x |
| **Styling** | Tailwind CSS | 4.x |
| **UI Components** | Shadcn/ui + Radix UI | Latest |
| **Database** | PostgreSQL | 18 |
| **ORM** | Drizzle ORM | 0.44.6 |
| **Authentication** | Clerk | 6.34.0 |
| **Background Jobs** | Inngest | 3.44.3 |
| **Validation** | Zod | 4.1.12 |
| **Icons** | Lucide React | 0.546.0 |

### Architecture Patterns

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Client (Browser)                      â”‚
â”‚  React 19 Components + Shadcn UI + Tailwind CSS v4     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Next.js 16 App Router                       â”‚
â”‚  â€¢ Server Components (RSC)                              â”‚
â”‚  â€¢ Client Components                                    â”‚
â”‚  â€¢ API Routes                                           â”‚
â”‚  â€¢ Middleware (Clerk Auth)                              â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                    â”‚                  â”‚
     â–¼                    â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Clerk  â”‚      â”‚   Drizzle    â”‚    â”‚   Inngest    â”‚
â”‚  Auth   â”‚      â”‚     ORM      â”‚    â”‚  Background  â”‚
â”‚ Service â”‚      â”‚              â”‚    â”‚    Jobs      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚                   â”‚
                        â–¼                   â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  PostgreSQL  â”‚    â”‚   Webhooks   â”‚
                â”‚   Database   â”‚    â”‚ (Clerk Sync) â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ

```
D:/bun-pos/client/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                      # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ (clerk)/             # Auth routes (sign-in)
â”‚   â”‚   â”œâ”€â”€ (job-seeker)/        # Job seeker pages (main)
â”‚   â”‚   â”œâ”€â”€ employer/            # Employer dashboard
â”‚   â”‚   â”œâ”€â”€ api/inngest/         # Inngest webhook endpoint
â”‚   â”‚   â”œâ”€â”€ layout.tsx           # Root layout
â”‚   â”‚   â””â”€â”€ globals.css          # Global styles
â”‚   â”‚
â”‚   â”œâ”€â”€ components/              # Reusable UI components
â”‚   â”‚   â”œâ”€â”€ ui/                  # Shadcn/ui components (9 components)
â”‚   â”‚   â””â”€â”€ sidebar/             # Sidebar navigation components
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                # Feature-based modules
â”‚   â”‚   â””â”€â”€ users/
â”‚   â”‚       â”œâ”€â”€ components/      # User-specific components
â”‚   â”‚       â”œâ”€â”€ db/              # User database operations
â”‚   â”‚       â”‚   â”œâ”€â”€ cache/       # Cache invalidation utilities
â”‚   â”‚       â”‚   â”œâ”€â”€ user.ts
â”‚   â”‚       â”‚   â””â”€â”€ userNotificationSettings.ts
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ drizzle/                 # Database layer
â”‚   â”‚   â”œâ”€â”€ schema/              # Database table schemas (7 tables)
â”‚   â”‚   â”œâ”€â”€ migrations/          # SQL migration files
â”‚   â”‚   â”œâ”€â”€ db.ts                # Drizzle instance
â”‚   â”‚   â”œâ”€â”€ schema.ts            # Schema exports
â”‚   â”‚   â””â”€â”€ schemaHelpers.ts     # Reusable schema utilities
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                # External service integrations
â”‚   â”‚   â”œâ”€â”€ clerk/               # Clerk authentication
â”‚   â”‚   â”‚   â”œâ”€â”€ components/      # Auth components
â”‚   â”‚   â”‚   â””â”€â”€ libs/            # Auth utilities
â”‚   â”‚   â””â”€â”€ inngest/             # Background job processing
â”‚   â”‚       â”œâ”€â”€ client.ts        # Inngest client config
â”‚   â”‚       â””â”€â”€ functions/       # Job functions
â”‚   â”‚
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â””â”€â”€ env/                 # Environment variable validation
â”‚   â”‚       â”œâ”€â”€ server.ts        # Server-side env vars
â”‚   â”‚       â””â”€â”€ client.ts        # Client-side env vars
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                   # Custom React hooks
â”‚   â”‚   â”œâ”€â”€ useIsDarkMode.ts
â”‚   â”‚   â””â”€â”€ use-mobile.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                     # Utility functions
â”‚   â”‚   â”œâ”€â”€ utils.ts             # Class merging utility
â”‚   â”‚   â””â”€â”€ dataCache.ts         # Cache tag helpers
â”‚   â”‚
â”‚   â””â”€â”€ middleware.ts            # Clerk auth middleware
â”‚
â”œâ”€â”€ public/                      # Static assets
â”œâ”€â”€ drizzle.config.ts           # Drizzle ORM configuration
â”œâ”€â”€ next.config.ts              # Next.js configuration
â”œâ”€â”€ tsconfig.json               # TypeScript configuration
â”œâ”€â”€ components.json             # Shadcn/ui configuration
â”œâ”€â”€ docker-compose.yml          # PostgreSQL Docker setup
â”œâ”€â”€ package.json                # Dependencies
â””â”€â”€ .env.local                  # Environment variables (not in git)
```

---

## ğŸ—„ï¸ Database Schema

### ER Diagram Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    users     â”‚â”€â”€â”€â”
â”‚ (UserTable)  â”‚   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ id (PK)      â”‚   â”‚
â”‚ name         â”‚   â”‚
â”‚ email        â”‚   â”‚ 1:1
â”‚ imageUrl     â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
       â”‚           â”œâ”€â”€â”€â”€ user_notification_settings
       â”‚           â”‚     (UserNotificationSettingsTable)
       â”‚           â”‚
       â”‚           â””â”€â”€â”€â”€ user_resumes
       â”‚                 (userResumeTable)
       â”‚
       â”‚ 1:N
       â”œâ”€â”€â”€â”€ job_listing_applications
       â”‚     (Composite PK: jobListingId + userId)
       â”‚
       â”‚ 1:N
       â””â”€â”€â”€â”€ organization_user_settings


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  organizations   â”‚
â”‚(OrganizationTable)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚
â”‚ name             â”‚
â”‚ imageUrl         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1:N
         â”‚
         â””â”€â”€â”€â”€ job_listings
               (jobListingTable)
               â”œâ”€ id (UUID, PK)
               â”œâ”€ title, description
               â”œâ”€ wage, wageInterval
               â”œâ”€ location (state, city)
               â”œâ”€ status (draft/published/delisted)
               â”œâ”€ type (internship/part-time/full-time)
               â””â”€ experienceLevel (junior/mid-level/senior)
```

### Table Details

#### 1. **users**
**Purpose**: à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸—à¸µà¹ˆà¸‹à¸´à¸‡à¸„à¹Œà¸ˆà¸²à¸ Clerk

| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | varchar | PK | Clerk User ID |
| name | varchar | NOT NULL | à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ |
| email | varchar | UNIQUE, NOT NULL | à¸­à¸µà¹€à¸¡à¸¥ |
| imageUrl | varchar | NOT NULL | URL à¸£à¸¹à¸›à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ |
| createdAt | timestamp | NOT NULL | à¸§à¸±à¸™à¸—à¸µà¹ˆà¸ªà¸£à¹‰à¸²à¸‡ |
| updatedAt | timestamp | NOT NULL | à¸§à¸±à¸™à¸—à¸µà¹ˆà¸­à¸±à¸à¹€à¸”à¸• |

**Relations**:
- âœ… 1:1 â†’ user_notification_settings
- âœ… 1:1 â†’ user_resumes
- âœ… 1:N â†’ job_listing_applications
- âœ… 1:N â†’ organization_user_settings

---

#### 2. **organizations**
**Purpose**: à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸­à¸‡à¸„à¹Œà¸à¸£/à¸šà¸£à¸´à¸©à¸±à¸—à¸™à¸²à¸¢à¸ˆà¹‰à¸²à¸‡

| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | varchar | PK | Clerk Organization ID |
| name | varchar | NOT NULL | à¸Šà¸·à¹ˆà¸­à¸­à¸‡à¸„à¹Œà¸à¸£ |
| imageUrl | varchar | NULLABLE | URL à¹‚à¸¥à¹‚à¸à¹‰à¸­à¸‡à¸„à¹Œà¸à¸£ |
| createdAt | timestamp | NOT NULL | à¸§à¸±à¸™à¸—à¸µà¹ˆà¸ªà¸£à¹‰à¸²à¸‡ |
| updatedAt | timestamp | NOT NULL | à¸§à¸±à¸™à¸—à¸µà¹ˆà¸­à¸±à¸à¹€à¸”à¸• |

**Relations**:
- âœ… 1:N â†’ job_listings
- âœ… 1:N â†’ organization_user_settings

---

#### 3. **job_listings**
**Purpose**: à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸›à¸£à¸°à¸à¸²à¸¨à¸‡à¸²à¸™

| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | uuid | PK, AUTO | à¸£à¸«à¸±à¸ªà¸›à¸£à¸°à¸à¸²à¸¨à¸‡à¸²à¸™ |
| organizationId | varchar | FK, CASCADE DELETE | à¸£à¸«à¸±à¸ªà¸­à¸‡à¸„à¹Œà¸à¸£ |
| title | varchar | NOT NULL | à¸«à¸±à¸§à¸‚à¹‰à¸­à¸‡à¸²à¸™ |
| description | varchar | NOT NULL | à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸‡à¸²à¸™ |
| wage | integer | NULLABLE | à¹€à¸‡à¸´à¸™à¹€à¸”à¸·à¸­à¸™/à¸„à¹ˆà¸²à¸ˆà¹‰à¸²à¸‡ |
| wageInterval | enum | NULLABLE | 'hourly' \| 'yearly' |
| stateAbbreviation | varchar | INDEXED | à¸£à¸«à¸±à¸ªà¸£à¸±à¸ (US) |
| city | varchar | NULLABLE | à¹€à¸¡à¸·à¸­à¸‡ |
| isFeatured | boolean | DEFAULT false | à¸‡à¸²à¸™à¹€à¸”à¹ˆà¸™ |
| locationRequirement | enum | NOT NULL | 'in-office' \| 'hybrid' \| 'remote' |
| experienceLevel | enum | NOT NULL | 'junior' \| 'mid-level' \| 'senior' |
| status | enum | DEFAULT 'draft' | 'draft' \| 'published' \| 'delisted' |
| type | enum | NOT NULL | 'internship' \| 'part-time' \| 'full-time' |
| postedAt | timestamp | NULLABLE | à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸œà¸¢à¹à¸à¸£à¹ˆ |
| createdAt | timestamp | NOT NULL | à¸§à¸±à¸™à¸—à¸µà¹ˆà¸ªà¸£à¹‰à¸²à¸‡ |
| updatedAt | timestamp | NOT NULL | à¸§à¸±à¸™à¸—à¸µà¹ˆà¸­à¸±à¸à¹€à¸”à¸• |

**Indexes**: `stateAbbreviation` (à¸ªà¸³à¸«à¸£à¸±à¸šà¸„à¹‰à¸™à¸«à¸²à¸•à¸²à¸¡à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆ)

**Relations**:
- âœ… N:1 â†’ organizations
- âœ… 1:N â†’ job_listing_applications

---

#### 4. **user_resumes**
**Purpose**: à¹€à¸à¹‡à¸šà¹„à¸Ÿà¸¥à¹Œ Resume à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰

| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| userId | varchar | PK, FK | Clerk User ID |
| resumeFileUrl | varchar | NOT NULL | URL à¹„à¸Ÿà¸¥à¹Œ Resume |
| resumeFileKey | varchar | NOT NULL | Key à¸ªà¸³à¸«à¸£à¸±à¸š Storage |
| aiSummary | varchar | NULLABLE | à¸ªà¸£à¸¸à¸› Resume à¸”à¹‰à¸§à¸¢ AI |
| createdAt | timestamp | NOT NULL | à¸§à¸±à¸™à¸—à¸µà¹ˆà¸ªà¸£à¹‰à¸²à¸‡ |
| updatedAt | timestamp | NOT NULL | à¸§à¸±à¸™à¸—à¸µà¹ˆà¸­à¸±à¸à¹€à¸”à¸• |

**Relations**: âœ… 1:1 â†’ users

---

#### 5. **user_notification_settings**
**Purpose**: à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸à¸²à¸£à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰

| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| userId | varchar | PK, FK | Clerk User ID |
| newJobEmailNotifications | boolean | DEFAULT false | à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¸‡à¸²à¸™à¹ƒà¸«à¸¡à¹ˆà¸—à¸²à¸‡à¸­à¸µà¹€à¸¡à¸¥ |
| aiPrompt | varchar | NULLABLE | Prompt à¸ªà¸³à¸«à¸£à¸±à¸š AI Matching |
| createdAt | timestamp | NOT NULL | à¸§à¸±à¸™à¸—à¸µà¹ˆà¸ªà¸£à¹‰à¸²à¸‡ |
| updatedAt | timestamp | NOT NULL | à¸§à¸±à¸™à¸—à¸µà¹ˆà¸­à¸±à¸à¹€à¸”à¸• |

**Relations**: âœ… 1:1 â†’ users

---

#### 6. **job_listing_applications**
**Purpose**: à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¸ªà¸¡à¸±à¸„à¸£à¸‡à¸²à¸™

| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| jobListingId | uuid | PK (Composite), FK | à¸£à¸«à¸±à¸ªà¸›à¸£à¸°à¸à¸²à¸¨à¸‡à¸²à¸™ |
| userId | varchar | PK (Composite), FK | à¸£à¸«à¸±à¸ªà¸œà¸¹à¹‰à¸ªà¸¡à¸±à¸„à¸£ |
| coverLetter | text | NULLABLE | à¸ˆà¸”à¸«à¸¡à¸²à¸¢à¸ªà¸¡à¸±à¸„à¸£à¸‡à¸²à¸™ |
| rating | integer | NULLABLE | à¸„à¸°à¹à¸™à¸™à¸ˆà¸²à¸à¸™à¸²à¸¢à¸ˆà¹‰à¸²à¸‡ |
| stage | enum | DEFAULT 'applied' | 'denied' \| 'applied' \| 'interested' \| 'interviewed' \| 'hired' |
| createdAt | timestamp | NOT NULL | à¸§à¸±à¸™à¸—à¸µà¹ˆà¸ªà¸¡à¸±à¸„à¸£ |
| updatedAt | timestamp | NOT NULL | à¸§à¸±à¸™à¸—à¸µà¹ˆà¸­à¸±à¸à¹€à¸”à¸• |

**Composite Primary Key**: (jobListingId, userId)

**Relations**:
- âœ… N:1 â†’ job_listings (CASCADE DELETE)
- âœ… N:1 â†’ users (CASCADE DELETE)

---

#### 7. **organization_user_settings**
**Purpose**: à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹ƒà¸™à¹à¸•à¹ˆà¸¥à¸°à¸­à¸‡à¸„à¹Œà¸à¸£

| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| userId | varchar | PK (Composite), FK | à¸£à¸«à¸±à¸ªà¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ |
| organizationId | varchar | PK (Composite), FK | à¸£à¸«à¸±à¸ªà¸­à¸‡à¸„à¹Œà¸à¸£ |
| newApplicationEmailNotifications | boolean | DEFAULT false | à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¹ƒà¸šà¸ªà¸¡à¸±à¸„à¸£à¹ƒà¸«à¸¡à¹ˆ |
| minimumRating | integer | NULLABLE | à¸à¸£à¸­à¸‡à¹ƒà¸šà¸ªà¸¡à¸±à¸„à¸£à¸•à¸²à¸¡à¸„à¸°à¹à¸™à¸™à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³ |
| createdAt | timestamp | NOT NULL | à¸§à¸±à¸™à¸—à¸µà¹ˆà¸ªà¸£à¹‰à¸²à¸‡ |
| updatedAt | timestamp | NOT NULL | à¸§à¸±à¸™à¸—à¸µà¹ˆà¸­à¸±à¸à¹€à¸”à¸• |

**Composite Primary Key**: (userId, organizationId)

**Relations**:
- âœ… N:1 â†’ users
- âœ… N:1 â†’ organizations

---

## ğŸ” Authentication & Authorization

### Clerk Integration

**Provider Setup** (`src/app/layout.tsx`):
```tsx
<ClerkProvider>
  <html lang="en">
    <body className="dark">{children}</body>
  </html>
</ClerkProvider>
```

**Middleware Protection** (`src/middleware.ts`):
```typescript
// Public routes
- /sign-in (à¹à¸¥à¸° sub-routes)
- / (à¸«à¸™à¹‰à¸²à¹à¸£à¸)
- /api/* (API endpoints)

// Protected routes
- à¸—à¸¸à¸ route à¸­à¸·à¹ˆà¸™à¹† à¸•à¹‰à¸­à¸‡ login à¸à¹ˆà¸­à¸™
```

### Environment Variables

**Server-side** (`.env.local`):
```bash
# Database
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_password
DB_NAME=brave_jobs

# Clerk
CLERK_SECRET_KEY=sk_test_...
CLERK_WEBHOOK_SECRET=whsec_...
```

**Client-side**:
```bash
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_IN_FALLBACK_REDIRECT_URL=/
NEXT_PUBLIC_CLERK_SIGN_UP_FALLBACK_REDIRECT_URL=/
```

### Auth Utilities

**Server-side**: `getCurrentUser(fullUser?: boolean)`
```typescript
// à¹ƒà¸Šà¹‰à¹ƒà¸™ Server Components
const { userId, user } = await getCurrentUser(true);
```

**Client Components**:
```tsx
<SignedIn>
  {/* à¹à¸ªà¸”à¸‡à¹€à¸¡à¸·à¹ˆà¸­ login à¹à¸¥à¹‰à¸§ */}
</SignedIn>

<SignedOut>
  <SignInButton />
</SignedOut>
```

---

## ğŸ”„ Background Jobs (Inngest)

### Webhook Flow: Clerk â†’ Inngest â†’ Database

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Clerk   â”‚ Webhook â”‚   Inngest    â”‚  CRUD   â”‚ Database â”‚
â”‚  Event   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   Function   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚    Cache     â”‚
                     â”‚ Invalidation â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Registered Functions

**1. clerkCreateUser** (`clerk/user.created`)
```typescript
// When user signs up in Clerk
1. Verify webhook signature (Svix)
2. Create user in database
3. Create notification settings
4. Invalidate cache tags
```

**2. clerkUpdateUser** (`clerk/user.updated`)
```typescript
// When user updates profile
1. Verify webhook signature
2. Update user in database
3. Invalidate cache tags
```

**3. clerkDeleteUser** (`clerk/user.deleted`)
```typescript
// When user is deleted
1. Verify webhook signature
2. Delete user from database (CASCADE deletes)
3. Invalidate cache tags
```

### Running Inngest Dev Server
```bash
npm run inngest
# à¸«à¸£à¸·à¸­
npx inngest-cli dev -u http://localhost:3000/api/inngest
```

---

## ğŸ¨ UI Components

### Shadcn/ui Components (9 components)

1. **button** - à¸›à¸¸à¹ˆà¸¡à¸«à¸¥à¸²à¸¢à¸£à¸¹à¸›à¹à¸šà¸š
2. **avatar** - à¸£à¸¹à¸›à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œà¸à¸£à¹‰à¸­à¸¡ fallback
3. **dropdown-menu** - à¹€à¸¡à¸™à¸¹à¹à¸šà¸š dropdown
4. **sidebar** - Sidebar navigation à¸à¸£à¹‰à¸­à¸¡ responsive
5. **tooltip** - Tooltip à¹à¸ªà¸”à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
6. **separator** - à¹€à¸ªà¹‰à¸™à¹à¸šà¹ˆà¸‡
7. **sheet** - Panel à¹à¸šà¸šà¹€à¸¥à¸·à¹ˆà¸­à¸™à¹€à¸‚à¹‰à¸²-à¸­à¸­à¸
8. **input** - Input field
9. **skeleton** - Loading placeholder

### Layout Components

**AppSidebar** - Sidebar à¸«à¸¥à¸±à¸à¸‚à¸­à¸‡à¹à¸­à¸
```tsx
<AppSidebar
  content={navItems}           // à¹€à¸¡à¸™à¸¹ navigation
  footerButton={userButton}    // à¸›à¸¸à¹ˆà¸¡à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œà¸œà¸¹à¹‰à¹ƒà¸Šà¹‰
>
  {children}                   // à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸«à¸™à¹‰à¸²
</AppSidebar>
```

**SidebarNavMenuGroup** - à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸¡à¸™à¸¹ navigation
```tsx
<SidebarNavMenuGroup
  items={[
    { href: '/', label: 'Job Board', icon: BriefcaseIcon },
    { href: '/ai-search', label: 'AI Search', icon: SparklesIcon, authRequired: true }
  ]}
/>
```

---

## ğŸš€ Development Workflow

### Initial Setup

```bash
# 1. Clone repository
git clone <repo-url>
cd client

# 2. Install dependencies
npm install

# 3. Start PostgreSQL (Docker)
docker-compose up -d

# 4. Setup environment variables
cp .env.example .env.local
# à¹à¸à¹‰à¹„à¸‚ .env.local à¹ƒà¸«à¹‰à¸„à¸£à¸š

# 5. Run database migrations
npm run db:migrate

# 6. Start development server
npm run dev

# 7. Start Inngest dev server (à¹ƒà¸™ terminal à¸­à¸·à¹ˆà¸™)
npm run inngest
```

### Available Scripts

| Command | Description |
|---------|-------------|
| `npm run dev` | à¹€à¸£à¸´à¹ˆà¸¡ dev server (http://localhost:3000) |
| `npm run build` | Build à¸ªà¸³à¸«à¸£à¸±à¸š production |
| `npm start` | à¸£à¸±à¸™ production server |
| `npm run lint` | à¸£à¸±à¸™ ESLint |
| `npm run db:push` | Push schema changes to DB |
| `npm run db:generate` | à¸ªà¸£à¹‰à¸²à¸‡ migration files |
| `npm run db:migrate` | à¸£à¸±à¸™ migrations |
| `npm run db:studio` | à¹€à¸›à¸´à¸” Drizzle Studio (DB GUI) |
| `npm run inngest` | à¹€à¸£à¸´à¹ˆà¸¡ Inngest dev server |

### Database Management

```bash
# à¸”à¸¹ database à¸œà¹ˆà¸²à¸™ GUI
npm run db:studio
# à¹€à¸›à¸´à¸”: https://local.drizzle.studio

# à¸ªà¸£à¹‰à¸²à¸‡ migration à¹ƒà¸«à¸¡à¹ˆà¸«à¸¥à¸±à¸‡à¹à¸à¹‰ schema
npm run db:generate

# à¸£à¸±à¸™ migrations
npm run db:migrate

# Push schema changes à¹‚à¸”à¸¢à¸•à¸£à¸‡ (dev only)
npm run db:push
```

---

## ğŸ“ Coding Conventions

### File Naming
- **Components**: PascalCase (e.g., `SidebarUserButton.tsx`)
- **Utilities**: camelCase (e.g., `getCurrentAuth.ts`)
- **Route files**: kebab-case (e.g., `sign-in/page.tsx`)
- **Client Components**: suffix `Client` (e.g., `_AppSidebarClient.tsx`)

### Component Patterns

**Server Component (Default)**:
```tsx
// src/features/users/components/SidebarUserButton.tsx
export async function SidebarUserButton() {
  const { user } = await getCurrentUser(true); // Data fetching
  return <SidebarUserButtonClient user={user} />;
}
```

**Client Component**:
```tsx
// src/features/users/components/SidebarUserButtonClient.tsx
'use client'

export function SidebarUserButtonClient({ user }) {
  const [isOpen, setIsOpen] = useState(false); // Interactivity
  // ...
}
```

### Cache Management Pattern

```typescript
// 1. Perform database operation
await db.update(UserTable).set({ name }).where(eq(UserTable.id, userId));

// 2. Invalidate global cache
revalidateTag(getCacheTag("users"));

// 3. Invalidate specific cache
revalidateTag(getCacheTag("user", userId));
```

### Type Safety

**Environment Variables**:
```typescript
// src/data/env/server.ts
export const env = createEnv({
  server: {
    DB_HOST: z.string().min(1),
    CLERK_SECRET_KEY: z.string().min(1),
    // ...
  },
  // Auto-validates on startup
});
```

**Database Enums**:
```typescript
// Type-safe enums
export const jobListingStatuses = ["draft", "published", "delisted"] as const;
export type jobListingStatus = (typeof jobListingStatuses)[number];
export const jobListingStatusEnum = pgEnum("job_listings_status", jobListingStatuses);
```

---

## ğŸ¯ Feature Roadmap

### âœ… Completed
- [x] Authentication system (Clerk)
- [x] Database schema (7 tables)
- [x] User sync via webhooks (Inngest)
- [x] Responsive sidebar navigation
- [x] Dark mode support
- [x] Cache management system
- [x] Docker PostgreSQL setup

### ğŸš§ In Progress
- [ ] Job listing CRUD (Employer)
- [ ] Job board listing page (Job Seeker)
- [ ] User profile & settings page

### ğŸ“‹ Planned Features

**Job Seeker Features**:
- [ ] Browse job listings with filters
  - Location (state, city)
  - Experience level
  - Job type (internship/part-time/full-time)
  - Location requirement (remote/hybrid/in-office)
- [ ] AI-powered job search
- [ ] Resume upload & AI summarization
- [ ] Apply to jobs with cover letter
- [ ] Track application status
- [ ] Personalized job notifications (AI matching)

**Employer Features**:
- [ ] Create/edit job listings
- [ ] Draft â†’ Published workflow
- [ ] Featured job listings (paid)
- [ ] View applications
- [ ] Rate applicants
- [ ] Filter applications by minimum rating
- [ ] Email notifications for new applications
- [ ] Organization management

**Advanced Features**:
- [ ] AI resume summarization
- [ ] AI job matching with custom prompts
- [ ] Application stage tracking (7 stages)
- [ ] Multi-user organization support
- [ ] Analytics dashboard
- [ ] Email notification system

---

## ğŸ” Key Files Reference

### Configuration
| File | Purpose |
|------|---------|
| `drizzle.config.ts` | Drizzle ORM configuration |
| `next.config.ts` | Next.js configuration |
| `tsconfig.json` | TypeScript compiler options |
| `components.json` | Shadcn/ui configuration |
| `docker-compose.yml` | PostgreSQL Docker setup |

### Core Application
| File | Purpose |
|------|---------|
| `src/app/layout.tsx` | Root layout with ClerkProvider |
| `src/middleware.ts` | Auth protection middleware |
| `src/app/globals.css` | Global styles & theme variables |
| `src/drizzle/db.ts` | Database connection instance |
| `src/drizzle/schema.ts` | Database schema exports |

### Services
| File | Purpose |
|------|---------|
| `src/services/clerk/libs/getCurrentAuth.ts` | Server-side auth utility |
| `src/services/inngest/client.ts` | Inngest client & event schemas |
| `src/services/inngest/functions/clerk.ts` | Webhook handlers |

### Utilities
| File | Purpose |
|------|---------|
| `src/lib/utils.ts` | Class name merging (`cn`) |
| `src/lib/dataCache.ts` | Cache tag generation |
| `src/data/env/server.ts` | Server env validation |
| `src/data/env/client.ts` | Client env validation |

### Features
| File | Purpose |
|------|---------|
| `src/features/users/db/user.ts` | User CRUD operations |
| `src/features/users/components/SidebarUserButton.tsx` | User profile button |

---

## ğŸ› Troubleshooting

### Database Connection Issues
```bash
# à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š PostgreSQL container
docker ps

# Restart PostgreSQL
docker-compose down
docker-compose up -d

# à¸”à¸¹ logs
docker-compose logs postgres
```

### Inngest Webhook Issues
```bash
# à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸² Inngest dev server à¸£à¸±à¸™à¸­à¸¢à¸¹à¹ˆà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ
npm run inngest

# à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š webhook URL à¹ƒà¸™ Clerk Dashboard
# à¸„à¸§à¸£à¹€à¸›à¹‡à¸™: http://localhost:3000/api/inngest
```

### Cache Issues
```typescript
// Clear all Next.js cache
// à¹ƒà¸™ terminal
rm -rf .next

// à¸«à¸£à¸·à¸­ clear specific cache tags
import { revalidateTag } from 'next/cache';
revalidateTag('users'); // Clear all users cache
```

### Type Errors
```bash
# Rebuild TypeScript
npm run build

# Check types only
npx tsc --noEmit
```

---

## ğŸ“š Additional Resources

### Documentation
- [Next.js 16 Docs](https://nextjs.org/docs)
- [Drizzle ORM Docs](https://orm.drizzle.team/)
- [Clerk Docs](https://clerk.com/docs)
- [Inngest Docs](https://www.inngest.com/docs)
- [Shadcn/ui Docs](https://ui.shadcn.com/)
- [Tailwind CSS v4 Docs](https://tailwindcss.com/docs)

### Key Concepts
- **App Router**: Next.js 16 routing system
- **Server Components**: React components à¸—à¸µà¹ˆà¸£à¸±à¸™à¸à¸±à¹ˆà¸‡ server
- **Server Actions**: Functions à¸—à¸µà¹ˆà¹€à¸£à¸µà¸¢à¸à¸ˆà¸²à¸ client à¹à¸•à¹ˆà¸£à¸±à¸™à¸à¸±à¹ˆà¸‡ server
- **Route Groups**: Folders à¹ƒà¸™ `()` à¹„à¸¡à¹ˆà¹à¸ªà¸”à¸‡à¹ƒà¸™ URL
- **Parallel Routes**: Routes à¸—à¸µà¹ˆà¹à¸ªà¸”à¸‡à¸à¸£à¹‰à¸­à¸¡à¸à¸±à¸™
- **Intercepting Routes**: Routes à¸—à¸µà¹ˆ intercept navigation

---

## ğŸ¤ Contributing Guidelines

### Branch Naming
- `feature/job-listing-crud` - Features à¹ƒà¸«à¸¡à¹ˆ
- `fix/auth-redirect-bug` - Bug fixes
- `refactor/sidebar-component` - Refactoring
- `docs/update-readme` - Documentation

### Commit Messages
```
feat: add job listing creation form
fix: resolve auth redirect loop
refactor: extract user dropdown to component
docs: update database schema documentation
chore: upgrade dependencies
```

### Pull Request Template
```markdown
## Description
Brief description of changes

## Type of Change
- [ ] Bug fix
- [ ] New feature
- [ ] Refactoring
- [ ] Documentation

## Testing
- [ ] Tested locally
- [ ] Database migrations tested
- [ ] All tests passing

## Screenshots (if applicable)
```

---

## ğŸ“Š Project Statistics

- **Database Tables**: 7
- **API Routes**: 1 (Inngest webhook)
- **Shadcn Components**: 9
- **Background Jobs**: 3 (Clerk sync)
- **Route Groups**: 3 (clerk, job-seeker, employer)
- **TypeScript Files**: ~30+
- **Lines of Code**: ~2000+

---

## ğŸ“ Support

For issues or questions:
1. Check this documentation first
2. Review the [Next.js docs](https://nextjs.org/docs)
3. Check [Clerk documentation](https://clerk.com/docs)
4. Review [Drizzle ORM docs](https://orm.drizzle.team/)
5. Create an issue in the repository

---

**Last Updated**: 2025-01-18
**Version**: 0.1.0
**Status**: Early Development
**Maintained By**: Development Team
